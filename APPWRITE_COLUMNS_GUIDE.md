# Appwrite Database Column Configuration Guide for Recipes Table

Based on your current codebase analysis, here's the recommended column configuration for migrating your `recipes` table to Appwrite.

## Column Configuration Summary

### Required Fields (Essential)

#### 1. **id** (Primary Key)
- **Type:** String
- **Size:** 255 (for slug-based IDs like "obiad-1", "babeczka-14")
- **Required:** ✅ Yes
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ✅ Yes (for fast lookups)

#### 2. **name**
- **Type:** String
- **Size:** 255 (recipe names are typically short)
- **Required:** ✅ Yes
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ✅ Yes (for search functionality - `.ilike('name', ...)`)

#### 3. **category**
- **Type:** String
- **Size:** 100 (category names like "OBIADY", "ZUPY", etc.)
- **Required:** ✅ Yes
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ✅ Yes (for filtering by category - `.eq('category', ...)`)

### Important Text Fields

#### 4. **shortdesc** (or **shortDesc** - use lowercase)
- **Type:** String
- **Size:** 500 (short descriptions are typically 1-2 sentences)
- **Required:** ❌ No (but recommended)
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No (not typically searched)

#### 5. **description**
- **Type:** String
- **Size:** 2000 (medium-length descriptions)
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 6. **fulldesc** (or **fullDesc** - use lowercase)
- **Type:** String
- **Size:** 10000 (long detailed descriptions)
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 7. **preparation**
- **Type:** String
- **Size:** 5000 (cooking instructions can be lengthy)
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 8. **ingredients**
- **Type:** String
- **Size:** 2000 (can contain multiple ingredients separated by newlines)
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 9. **base_ingredients**
- **Type:** String
- **Size:** 500 (comma-separated base ingredients)
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ✅ Yes (for ingredient search - `.ilike('base_ingredients', ...)`)

### Optional Metadata Fields

#### 10. **image**
- **Type:** String
- **Size:** 500 (image paths like "Obiady/kotlety_jaglane.jpg")
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 11. **time**
- **Type:** String
- **Size:** 50 (cooking time like "30 minut", "1 godzina")
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 12. **difficulty**
- **Type:** String
- **Size:** 50 (difficulty level descriptions)
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 13. **servings**
- **Type:** String
- **Size:** 20 (like "4 porcji")
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 14. **base** (or **bases**, **podstawa** - use **base**)
- **Type:** String
- **Size:** 500 (comma-separated base ingredients)
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 15. **spices** (or **przyprawy** - use **spices**)
- **Type:** String
- **Size:** 500 (comma-separated spices)
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 16. **path**
- **Type:** String
- **Size:** 100 (URL path like "obiady")
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

### Timestamp Fields (Auto-generated by Appwrite)

Appwrite automatically creates these fields, so you don't need to create them manually:
- **$id** - Auto-generated unique ID
- **$createdAt** - DateTime (auto-generated)
- **$updatedAt** - DateTime (auto-updated)

However, if you want to keep your existing `created_at` and `updated_at` fields from Supabase, you can create them as:

#### 17. **created_at** (Optional - if you want to migrate existing timestamps)
- **Type:** DateTime
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

#### 18. **updated_at** (Optional - if you want to migrate existing timestamps)
- **Type:** DateTime
- **Required:** ❌ No
- **Array:** ❌ No
- **Encrypted:** ❌ No
- **Default:** None
- **Indexed:** ❌ No

## Important Notes

### Field Name Normalization
Your code normalizes field names to lowercase (see `normalizeRecipe` function in `migrateRecipesToSupabase.js`). Make sure to use **lowercase** field names in Appwrite to match:
- `shortDesc` → `shortdesc`
- `fullDesc` → `fulldesc`
- Use `base_ingredients` (with underscore, not camelCase)

### Indexing Strategy
Based on your code usage:
- **Indexed:** `id`, `name`, `category`, `base_ingredients`
  - These are used in queries: `.eq('id', ...)`, `.ilike('name', ...)`, `.eq('category', ...)`, `.ilike('base_ingredients', ...)`
- **Not Indexed:** All other fields (used for display only, not filtering/searching)

### Size Recommendations
The sizes provided are conservative estimates based on your current data. You can:
- Increase sizes if you find data truncation
- Decrease sizes if you want to optimize storage (but be careful not to truncate existing data)

### Required vs Optional
Only make fields **Required** if they are:
1. Always present in your data
2. Critical for the application to function
3. Used in queries without null checks

Based on your code, only `id`, `name`, and `category` should be required.

## Migration Checklist

1. ✅ Create all columns with the specified types and sizes
2. ✅ Set Required checkbox for: `id`, `name`, `category`
3. ✅ Set Indexed checkbox for: `id`, `name`, `category`, `base_ingredients`
4. ✅ Leave Array and Encrypted unchecked for all fields
5. ✅ Use lowercase field names to match your normalization logic
6. ✅ Test with a few recipes first before bulk migration
7. ✅ Verify that search functionality works with indexed fields

## Example: Creating the "name" Column

When creating the `name` column in Appwrite:
- **Key:** `name`
- **Type:** String
- **Size:** 255
- **Required:** ✅ Checked
- **Array:** ❌ Unchecked
- **Encrypted:** ❌ Unchecked
- **Default:** Leave empty
- **Indexed:** ✅ Checked (for search functionality)

